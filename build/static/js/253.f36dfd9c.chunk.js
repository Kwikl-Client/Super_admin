"use strict";(self.webpackChunkmaterially_free_react_admin_template=self.webpackChunkmaterially_free_react_admin_template||[]).push([[253],{97253:function(e,t,r){r.r(t),r.d(t,{default:function(){return re}});var n=r(74165),a=r(15861),s=r(29439),i=r(47313),o=r(35662),c=r(61113),d=r(73428),l=r(93405),u=r(9019),p=r(95711),m=r(31095),h=r(51629),x=r(66835),f=r(23477),Z=r(24076),v=r(67478),b=r(57861),g=r(84506),j=r(4942),y=r(63366),k=r(87462),w=(r(96214),r(94146)),C=r(21921),S=r(17592),P=r(77342),R=r(65033),D=r(70501);var A=i.createContext({}),N=r(53800),_=r(77430),G=r(32298);function I(e){return(0,G.Z)("MuiAccordion",e)}var M=(0,_.Z)("MuiAccordion",["root","rounded","expanded","disabled","gutters","region"]),E=r(46417),L=["children","className","defaultExpanded","disabled","disableGutters","expanded","onChange","square","TransitionComponent","TransitionProps"],V=(0,S.ZP)(D.Z,{name:"MuiAccordion",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[(0,j.Z)({},"& .".concat(M.region),t.region),t.root,!r.square&&t.rounded,!r.disableGutters&&t.gutters]}})((function(e){var t,r=e.theme,n={duration:r.transitions.duration.shortest};return t={position:"relative",transition:r.transitions.create(["margin"],n),overflowAnchor:"none","&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(r.vars||r).palette.divider,transition:r.transitions.create(["opacity","background-color"],n)},"&:first-of-type":{"&:before":{display:"none"}}},(0,j.Z)(t,"&.".concat(M.expanded),{"&:before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&:before":{display:"none"}}}),(0,j.Z)(t,"&.".concat(M.disabled),{backgroundColor:(r.vars||r).palette.action.disabledBackground}),t}),(function(e){var t=e.theme,r=e.ownerState;return(0,k.Z)({},!r.square&&{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},!r.disableGutters&&(0,j.Z)({},"&.".concat(M.expanded),{margin:"16px 0"}))})),T=i.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiAccordion"}),n=r.children,a=r.className,o=r.defaultExpanded,c=void 0!==o&&o,d=r.disabled,l=void 0!==d&&d,u=r.disableGutters,p=void 0!==u&&u,m=r.expanded,h=r.onChange,x=r.square,f=void 0!==x&&x,Z=r.TransitionComponent,v=void 0===Z?R.Z:Z,b=r.TransitionProps,j=(0,y.Z)(r,L),S=(0,N.Z)({controlled:m,default:c,name:"Accordion",state:"expanded"}),D=(0,s.Z)(S,2),_=D[0],G=D[1],M=i.useCallback((function(e){G(!_),h&&h(e,!_)}),[_,h,G]),T=i.Children.toArray(n),W=(0,g.Z)(T),q=W[0],F=W.slice(1),B=i.useMemo((function(){return{expanded:_,disabled:l,disableGutters:p,toggle:M}}),[_,l,p,M]),U=(0,k.Z)({},r,{square:f,disabled:l,disableGutters:p,expanded:_}),z=function(e){var t=e.classes,r={root:["root",!e.square&&"rounded",e.expanded&&"expanded",e.disabled&&"disabled",!e.disableGutters&&"gutters"],region:["region"]};return(0,C.Z)(r,I,t)}(U);return(0,E.jsxs)(V,(0,k.Z)({className:(0,w.Z)(z.root,a),ref:t,ownerState:U,square:f},j,{children:[(0,E.jsx)(A.Provider,{value:B,children:q}),(0,E.jsx)(v,(0,k.Z)({in:_,timeout:"auto"},b,{children:(0,E.jsx)("div",{"aria-labelledby":q.props.id,id:q.props["aria-controls"],role:"region",className:z.region,children:F})}))]}))})),W=r(67999);function q(e){return(0,G.Z)("MuiAccordionSummary",e)}var F=(0,_.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),B=["children","className","expandIcon","focusVisibleClassName","onClick"],U=(0,S.ZP)(W.Z,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t,r=e.theme,n=e.ownerState,a={duration:r.transitions.duration.shortest};return(0,k.Z)((t={display:"flex",minHeight:48,padding:r.spacing(0,2),transition:r.transitions.create(["min-height","background-color"],a)},(0,j.Z)(t,"&.".concat(F.focusVisible),{backgroundColor:(r.vars||r).palette.action.focus}),(0,j.Z)(t,"&.".concat(F.disabled),{opacity:(r.vars||r).palette.action.disabledOpacity}),(0,j.Z)(t,"&:hover:not(.".concat(F.disabled,")"),{cursor:"pointer"}),t),!n.disableGutters&&(0,j.Z)({},"&.".concat(F.expanded),{minHeight:64}))})),z=(0,S.ZP)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:function(e,t){return t.content}})((function(e){var t=e.theme,r=e.ownerState;return(0,k.Z)({display:"flex",flexGrow:1,margin:"12px 0"},!r.disableGutters&&(0,j.Z)({transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest})},"&.".concat(F.expanded),{margin:"20px 0"}))})),H=(0,S.ZP)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:function(e,t){return t.expandIconWrapper}})((function(e){var t=e.theme;return(0,j.Z)({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},"&.".concat(F.expanded),{transform:"rotate(180deg)"})})),O=i.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiAccordionSummary"}),n=r.children,a=r.className,s=r.expandIcon,o=r.focusVisibleClassName,c=r.onClick,d=(0,y.Z)(r,B),l=i.useContext(A),u=l.disabled,p=void 0!==u&&u,m=l.disableGutters,h=l.expanded,x=l.toggle,f=(0,k.Z)({},r,{expanded:h,disabled:p,disableGutters:m}),Z=function(e){var t=e.classes,r=e.expanded,n=e.disabled,a=e.disableGutters,s={root:["root",r&&"expanded",n&&"disabled",!a&&"gutters"],focusVisible:["focusVisible"],content:["content",r&&"expanded",!a&&"contentGutters"],expandIconWrapper:["expandIconWrapper",r&&"expanded"]};return(0,C.Z)(s,q,t)}(f);return(0,E.jsxs)(U,(0,k.Z)({focusRipple:!1,disableRipple:!0,disabled:p,component:"div","aria-expanded":h,className:(0,w.Z)(Z.root,a),focusVisibleClassName:(0,w.Z)(Z.focusVisible,o),onClick:function(e){x&&x(e),c&&c(e)},ref:t,ownerState:f},d,{children:[(0,E.jsx)(z,{className:Z.content,ownerState:f,children:n}),s&&(0,E.jsx)(H,{className:Z.expandIconWrapper,ownerState:f,children:s})]}))}));function J(e){return(0,G.Z)("MuiAccordionDetails",e)}(0,_.Z)("MuiAccordionDetails",["root"]);var K=["className"],Q=(0,S.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){return{padding:e.theme.spacing(1,2,2)}})),X=i.forwardRef((function(e,t){var r=(0,P.Z)({props:e,name:"MuiAccordionDetails"}),n=r.className,a=(0,y.Z)(r,K),s=r,i=function(e){var t=e.classes;return(0,C.Z)({root:["root"]},J,t)}(s);return(0,E.jsx)(Q,(0,k.Z)({className:(0,w.Z)(i.root,n),ref:t,ownerState:s},a))})),Y=r(77970),$=r(69870),ee=r(2135),te=r(6306);function re(){var e=(0,i.useState)(),t=(0,s.Z)(e,2),r=t[0],g=t[1],j=(0,i.useState)(null),y=(0,s.Z)(j,2),k=y[0],w=y[1],C=(0,i.useState)(null),S=(0,s.Z)(C,2),P=S[0],R=S[1],D=(0,i.useState)(1),A=(0,s.Z)(D,2),N=A[0],_=A[1],G=(0,i.useState)(0),I=(0,s.Z)(G,2),M=I[0],L=I[1],V=(0,i.useState)(""),W=(0,s.Z)(V,2),q=W[0],F=W[1],B=(0,i.useState)(),U=(0,s.Z)(B,2),z=U[0],H=U[1],J=(0,i.useState)(),K=(0,s.Z)(J,2),Q=K[0],re=K[1],ae=(0,i.useState)(!0),se=(0,s.Z)(ae,2),ie=se[0],oe=se[1],ce=(0,i.useState)(!1),de=(0,s.Z)(ce,2),le=de[0],ue=de[1],pe=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,ue(!0),t={startDate:z,endDate:Q,searchStr:q},e.next=5,o.Z.post("http://3.87.157.92:7009/customer/getAllCustomer?page=".concat(N),t);case 5:r=e.sent,g(r.data.data.customers),L(r.data.data.totalPages),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching dashboard data:",e.t0);case 13:return e.prev=13,ue(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){pe()}),[ie]);var me=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k!==t){e.next=4;break}return R(null),w(null),e.abrupt("return");case 4:w(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("http://3.87.157.92:7009/payment/retrievePaymentDetails/".concat(t));case 3:r=e.sent,R(r.data.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),window.alert("Problem loading payment details");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z&&Q){e.next=3;break}return window.alert("Please fill start date and end Date"),e.abrupt("return");case 3:return e.prev=3,g(),_(1),t={startDate:z,endDate:Q,searchStr:q},e.next=9,o.Z.post("http://3.87.157.92:7009/customer/getAllCustomer?page=1",t);case 9:r=e.sent,g(r.data.data.customers),L(r.data.data.totalPages),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.error(e.t0),window.alert("Problem doing filteration");case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(),_(1),F(t),r={startDate:z,endDate:Q,searchStr:t},e.next=7,o.Z.post("http://3.87.157.92:7009/customer/getAllCustomer?page=1",r);case 7:a=e.sent,g(a.data.data.customers),L(a.data.data.totalPages),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0),window.alert("Problem doing filteration");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)($.Z,{title:"Users List Page",children:[(0,E.jsx)(c.Z,{component:ee.rU,to:"/",variant:"subtitle2",color:"inherit",className:"link-breadcrumb",children:"Home"}),(0,E.jsx)(c.Z,{variant:"subtitle2",color:"primary",className:"link-breadcrumb",children:"Users List Page"})]}),(0,E.jsx)(d.Z,{children:(0,E.jsx)(l.Z,{children:(0,E.jsxs)("div",{className:"dashboard-container",children:[(0,E.jsxs)(u.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,E.jsx)(u.ZP,{item:!0,xs:6,sm:3,children:(0,E.jsx)(p.Z,{label:"Search",variant:"outlined",size:"small",margin:"normal",value:q,onChange:function(e){return fe(e.target.value)}})}),(0,E.jsx)(u.ZP,{item:!0,xs:6,sm:3,children:(0,E.jsx)(p.Z,{fullWidth:!0,variant:"outlined",label:"Start Date",type:"date",value:z,onChange:function(e){return H(e.target.value)},InputLabelProps:{shrink:!0}})}),(0,E.jsx)(u.ZP,{item:!0,xs:6,sm:3,children:(0,E.jsx)(p.Z,{fullWidth:!0,variant:"outlined",label:"End Date",type:"date",value:Q,onChange:function(e){return re(e.target.value)},InputLabelProps:{shrink:!0}})}),(0,E.jsxs)(u.ZP,{item:!0,xs:6,sm:3,children:[(0,E.jsx)(m.Z,{variant:"outlined",size:"small",onClick:xe,children:"Fetch Data"}),(0,E.jsx)(m.Z,{variant:"outlined",size:"small",onClick:function(){_(1),F(""),H(""),re(""),oe(!ie)},children:"Clear Filters"})]})]}),r?r.length>0?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(h.Z,{children:(0,E.jsxs)(x.Z,{children:[(0,E.jsx)(f.Z,{children:(0,E.jsxs)(Z.Z,{children:[(0,E.jsx)(v.Z,{children:"ID"}),(0,E.jsx)(v.Z,{children:"Email"}),(0,E.jsx)(v.Z,{children:"Amount"}),(0,E.jsx)(v.Z,{children:"Date"}),(0,E.jsx)(v.Z,{children:"Actions"})]})}),le?(0,E.jsx)("h2",{children:"Loading..."}):(0,E.jsx)(b.Z,{children:r.map((function(e,t){return(0,E.jsx)(i.Fragment,{children:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(Z.Z,{children:[(0,E.jsx)(v.Z,{children:e._id.substring(0,8)}),(0,E.jsx)(v.Z,{children:e.email}),(0,E.jsx)(v.Z,{children:e.amtPaid}),(0,E.jsx)(v.Z,{children:e.createdAt.slice(0,10)}),(0,E.jsx)(v.Z,{children:(0,E.jsx)(c.Z,{variant:"outlined",onClick:function(){return me(e._id)},style:{color:"blue",textDecoration:"underline",cursor:"pointer"},children:k===e._id?"Close":"View"})})]}),k===e._id&&(0,E.jsx)(Z.Z,{children:(0,E.jsx)(v.Z,{colSpan:5,children:(0,E.jsxs)(T,{children:[(0,E.jsx)(O,{expandIcon:(0,E.jsx)(te.Z,{onClick:function(){return he(e.stripeDetails)}}),children:(0,E.jsx)(c.Z,{variant:"h6",children:"Details"})}),(0,E.jsx)(X,{children:(0,E.jsx)(ne,{stripeDetails:P})})]})})})]})},t)}))})]})}),(0,E.jsx)(Y.Z,{count:M,page:N,onChange:function(e,t){_(t),oe(!ie)}})]}):(0,E.jsx)(c.Z,{children:"No customers available."}):(0,E.jsx)("h2",{children:"Loading..."})]})})})]})}var ne=function(e){var t=e.stripeDetails,r=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=t.customer_email)){e.next=9;break}return e.next=5,o.Z.delete("http://3.87.157.92:7009/customer/deleteUser/".concat(r));case 5:console.log("User with email ".concat(r," deleted successfully")),setIsSnackbarOpen(!0),e.next=10;break;case 9:console.error("Email not available in stripeDetailsData");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("Error deleting user:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return(0,E.jsxs)("div",{className:"collapsible-tab",children:[(0,E.jsx)(c.Z,{variant:"h6",children:"Payment Details:"}),t?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(c.Z,{children:["Total Amount: ",t.amount_total]}),(0,E.jsxs)(c.Z,{children:["Currency: ",t.currency]}),(0,E.jsxs)(c.Z,{children:["Customer Email: ",t.customer_email]}),(0,E.jsxs)(c.Z,{children:["Payment Status: ",t.payment_status]}),(0,E.jsxs)(c.Z,{children:["Payment Intent: ",t.payment_intent]}),(0,E.jsx)(m.Z,{variant:"outlined",onClick:r,children:"Delete User"})]}):(0,E.jsx)(c.Z,{children:"Loading payment details..."})]})}}}]);